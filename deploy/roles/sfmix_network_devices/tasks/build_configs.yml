---
- name: "Template: General"
  delegate_to: localhost
  ansible.builtin.template:
    src: eos/general.j2
    dest: "{{ config_parts_dir }}/general.eos_config.txt"
    mode: ug=rw,o=r
- name: "Template: Interfaces"
  delegate_to: localhost
  ansible.builtin.template:
    src: eos/interface.j2
    dest: "{{ config_parts_dir }}/interface_{{ interface_name | replace('/', '_') }}.eos_config.txt"
    mode: ug=rw,o=r
  tags:
    - interfaces
  with_items: "{{ interfaces | map(attribute='name') | sort }}"
  loop_control:
    loop_var: interface_name
