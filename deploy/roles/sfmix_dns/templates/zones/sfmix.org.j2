; vim: set tabstop=8 shiftwidth=8
; This zone file is generated by Ansible.
$TTL 3600
@	IN	SOA	ns1.sfmix.org.	tech-c.sfmix.org. (
	{{ '%Y%m%d02'|strftime }} ; serial-number
	8H	; time-to-refresh
	1H	; time-to-retry
	7D	; time-to-expire
	1H	; minumum-TTL
	)

	IN	NS	ns1.sfmix.org.
	IN	NS	ns3.he.net.
	IN	NS	ns5.he.net.
	IN	NS	ns1.lonap.net.
	IN	NS	ns3.lonap.net.
	IN	NS	ns4.lonap.net.uk.
	IN	NS	ns5.lonap.net.uk.

; Google Apps
@			IN	MX	1 ASPMX.L.GOOGLE.COM.
@			IN	MX	5 ALT1.ASPMX.L.GOOGLE.COM.
@			IN	MX	5 ALT2.ASPMX.L.GOOGLE.COM.
@			IN	MX	10 ALT3.ASPMX.L.GOOGLE.COM.
@			IN	MX	10 ALT4.ASPMX.L.GOOGLE.COM.
@			IN	TXT	"v=spf1 include:_spf.google.com ~all"
@			IN	SPF	"v=spf1 include:_spf.google.com ~all"
mail			IN	CNAME	ghs.googlehosted.com.
_dmarc			IN	TXT	"v=DMARC1; p=none; sp=none; rf=afrf; pct=100; ri=86400"
googlea994b6d001486007	IN	CNAME	google.com.
google._domainkey	IN	TXT	"v=DKIM1; k=rsa; p=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArUPk9h1MpfIlTVsIV6DbB" "bw2TkIbR1OCxFY4lBqLB1fv1i0+086g9CNAwVK+mqeNC6OdCoem0tHNVg3PmMuYhnwAwCAYhO0l4qf5Ew44LPZYBAXYwAEN4TQ0P/Y0Z" "zAU6Cz3VP/Y1S52VIwVKEhfFsJh3++8TBL7zePmoUtdZZgpkWbaWE1W7OzlyxhgWF0EoaQ32VPL8K6QmWye6nSmJJ1KqRWGp6jsl4v" "pP0F02mYYKgCHK12SpvgQ03CFwOfxlGoEGdhQE6YSIrvvZCag474WIkI2R4BenGYctDHoY8XhL1TxUnPYIjE8J+QcpszOlXyHwBJMD2T/aVMQmGIN5QIDAQAB"
; WPEngine Hosted Web Site
@			IN	A	35.230.26.92
www			IN	CNAME	sfmix.wpengine.com.

; External
ns3		IN	A	193.47.147.100
ns3		IN	AAAA	2001:67c:1b43:100::100

; These use a separate dynamic zone file to support the LetsEncrypt DNS-01
;   challenge; this enables creating a wildcard *.<subdomain>.sfmix.org certificate
teleport	IN	NS	ns1.sfmix.org.

; sfo01 -- 365 Main
wan.mgmt-gw.sfo01		IN	A	192.235.122.10
mgmt-gw.sfo01			IN	A	100.64.2.1
switch01.oob.sfo01		IN	CNAME	switch01.sfo01
switch01.sfo01			IN	A	100.64.2.15
pdu01.oob.sfo01			IN	A	100.64.2.3
;pdu02.oob.sfo01		IN	A	100.64.2.4
ipmi.proxmox.oob.sfo01		IN	A	100.64.2.5
proxmox.oob.sfo01		IN	A	100.64.2.6
; Confusingly, "rs.sfo01" is now located in sfo02. needs a rename
rs.sfo01			IN	A	206.197.187.254

gw.sfo01	IN	A	192.33.255.20
gw.sfo01	IN	AAAA	2620:11A:B000:100::4

lg		IN	A	192.33.255.7
lg		IN	AAAA	2620:11A:B000::7

sentry		IN	A	192.33.255.9
sentry		IN	AAAA	2620:11A:B000::9



; sfo02 -- 200 Paul Ave
wan.mgmt-gw.sfo02		IN	A	198.35.53.243
mgmt-gw.sfo02			IN	A	100.64.0.1
oob-vpn-headend			IN	A	198.35.53.243
switch01.sfo02			IN	A	100.64.0.15
switch01.oob.sfo02		IN	CNAME	switch01.sfo02
switch02.sfo02			IN	A	100.64.0.16
switch02.oob.sfo02		IN	CNAME	switch02.sfo02
pdu01.sfo02			IN	A	100.64.0.3
pdu02.sfo02			IN	A	100.64.0.4
ipmi.proxmox.oob.sfo02		IN	A	100.64.0.5
gw-sfo02			IN	A	100.64.0.6
vlan20.gw.oob.sfo02		IN	A	100.64.0.8
monitor.oob.sfo02		IN	A	100.64.0.9
mgmt-switch.sfo02		IN	A	100.64.0.11
wan-switch.sfo02		IN	A	100.64.0.12
netbox.oob.sfo02		IN	A	100.64.0.13
metrics.oob.sfo02		IN	A	100.64.0.14
;AVAILABLE			IN	A	100.64.0.30
portal2.sfo02			IN	A	100.64.0.17
mgmt.rs-linux			IN	A	100.64.0.18
pve01-paulave200-sfo		IN	A	100.64.0.21
pve02-paulave200-sfo		IN	A	100.64.0.23

gw.sfo02			IN	CNAME	vlan101.gw.sfo02
vlan101.gw.sfo02		IN	A	192.33.255.1
bcast-vlan101.gw.sfo02		IN	A	192.33.255.15

gw-telx.sfo02		IN	A	198.35.53.241
re0.gw.sfo02	 	IN	A	198.35.53.242
eth0.gw-oob-sfo02	IN	A	198.35.53.243
eth1.gw.sfo02		IN	A	198.35.53.244
openwrt.sfo02		IN	A	198.35.53.246

re1-30.gw.sfo02		IN	A	149.20.37.65
			IN	AAAA	2001:4f8:4:6a::2
; old name
rs.sfo02	IN	CNAME	rs-linux
;
rs-linux	IN	A	206.197.187.253

ns1			IN	A	192.33.255.3
			IN	AAAA	2620:11a:b000::3

librenms	IN	CNAME	monitor.sfo02
monitor.sfo02	IN	A	192.33.255.4
		IN	AAAA	2620:11a:b000::4
monitor.sfo02	IN	SSHFP 1 1 b545f8a2bba5886877fd6e4d72022187cadb161d
monitor.sfo02	IN	SSHFP 1 2 6c14db1d18ca35d96051d14c1918f678a35a33bdcd614977acdf722c40b29dbc
monitor.sfo02	IN	SSHFP 2 1 99466d885d3bc1483613345636a1913fbed21e3b
monitor.sfo02	IN	SSHFP 2 2 d9e4d0c46327aabf2b0c06e395df9b9b95e5ab08fdede1bf9413bb87036dcb24
monitor.sfo02	IN	SSHFP 3 1 52ec7a6cf659beed3e8ca777cd3c7962edad057d
monitor.sfo02	IN	SSHFP 3 2 cb0e5f76ac55206832976a34ac2b9b5a7d8f13aaf9b913898a4d2fdf04bf5b85

netbox		IN	CNAME	netbox.sfo02
netbox.sfo02	IN	A	192.33.255.6
netbox.sfo02	IN	AAAA	2620:11a:b000::6

metrics			IN	CNAME	metrics.sfo02
metrics.sfo02		IN	A	192.33.255.10
metrics.sfo02		IN	AAAA	2620:11a:b000::10

grafana		IN	CNAME	metrics.sfo02

portal		IN	A	192.33.255.12
portal		IN	AAAA	2620:11a:b000::12

; FMT01
wan.mgmt-gw.fmt01	IN	A		64.71.188.18
gw.oob.fmt01		IN	A		100.64.1.1
mgmt-gw.fmt01		IN	A		100.64.1.1
switch01.fmt01		IN	A		100.64.1.15
switch01.oob.fmt01	IN	CNAME		switch01.fmt01
switch02.fmt01		IN	A		100.64.1.16
switch02.oob.fmt01	IN	CNAME		switch02.fmt01
switch03.fmt01		IN	A		100.64.1.17
pdu01.oob.fmt01		IN	A		100.64.1.4
pdu02.oob.fmt01		IN	A		100.64.1.5
backup1			IN	A		100.64.1.6
shell			IN	A		100.64.1.8

alice		IN	A	192.33.255.18
alice		IN	AAAA	2620:11A:B000:100::2
mgmt.alice	IN	A	100.64.1.7


; SCL01 (QTS SJC1)
wan.mgmt-gw.scl01	IN	A		205.234.25.36
gw.oob.scl01		IN	A		100.64.4.1
mgmt-gw.scl01		IN	A		100.64.4.1
mgmt-switch.scl01	IN	A		100.64.4.2
switch01.oob.scl01	IN	CNAME		switch01.scl01
switch01.scl01		IN	A		100.64.4.15
pdu01.scl01		IN	A		100.64.4.4
pdu02.scl01		IN	A		100.64.4.5

; SCL02 (CoreSite SV4)
wan.mgmt-gw.scl02	IN	A		66.128.149.4
gw.oob.scl02		IN	A		100.64.6.1
mgmt-gw.scl02		IN	A		100.64.6.1
mgmt-switch.scl02	IN	A		100.64.6.2
switch01.oob.scl02	IN	CNAME		switch01.scl02
switch01.scl02		IN	A		100.64.6.15
pdu01.scl02		IN	A		100.64.6.40
pdu02.scl02		IN	A		100.64.6.39

; scl04 -- OpenColo / Energy Group Networks LLC
wan.mgmt-gw.scl04	IN	A	166.88.18.186
mgmt-gw.scl04		IN	A	100.64.7.1
mgmt-switch.scl04	IN	A	100.64.7.2
switch01.scl04		IN	A	100.64.7.15
pdu01.scl04		IN	A	100.64.7.4
pdu01.scl04		IN	A	100.64.7.5

; Hosted organizations
gw-vlan100.sfo02	IN	A	192.33.255.17
			IN	AAAA	2620:11A:B000:100::1
gw-ripeprobe.gw.sfo02	IN	A	192.33.255.25
			IN	AAAA	2620:11A:B000:102::1
ripeprobe.gw.sfo02	IN	A	192.33.255.26
			IN	AAAA	2620:11A:B000:102::2
gw-verisign		IN	A	192.33.255.33
			IN	AAAA	2620:11A:B000:103::1
gw-routeview		IN	A	192.33.255.29
			IN	AAAA	2620:11A:B000:104::1
; SJC01
wan.mgmt-gw.sjc01	IN	A		173.243.64.202
gw.oob.sjc01		IN	A		100.64.5.1
mgmt-gw.sjc01		IN	A		100.64.5.1
switch01.sjc01		IN	A		100.64.5.15
switch01.oob.sjc01	IN	CNAME		switch01.sjc01
switch02.sjc01		IN	A		100.64.5.16
switch02.oob.sjc01	IN	CNAME		switch02.sjc01

; Member IPv4 interfaces
lg.sfo01	IN	A	206.197.187.1	; SFMIX lg
lg.sfo01	IN	AAAA	2001:504:30::ba01:2276:1	; SFMIX lg
{% for ip_id, ip_address in netbox_participant_ip_addresses.items() %}
{%   set as_plus_number = 'as' + netbox_participants[ip_address.tenant.id].custom_fields.as_number | string %}
{%   if ip_address.family.value == 4 %}
{%     set type = "A" %}
{%   elif ip_address.family.value == 6 %}
{%     set type = "AAAA" %}
{%   endif %}
{{ as_plus_number }}		IN	{{ type }}	{{ ip_address.address | ansible.utils.ipaddr('address') }}
{% endfor %}
