; vim: set tabstop=8 shiftwidth=8
; This zone file is generated by Ansible.
$TTL 3600
@	IN	SOA	ns1.sfmix.org.	tech-c.sfmix.org. (
	{{ '%Y%m%d02'|strftime }} ; serial-number
	8H	; time-to-refresh
	1H	; time-to-retry
	7D	; time-to-expire
	1H	; minumum-TTL
	)

	IN	NS	ns1.sfmix.org.
	IN	NS	ns3.he.net.
	IN	NS	ns5.he.net.
	IN	NS	ns1.lonap.net.
	IN	NS	ns3.lonap.net.
	IN	NS	ns4.lonap.net.uk.
	IN	NS	ns5.lonap.net.uk.

; Google Apps
@			IN	MX	1 ASPMX.L.GOOGLE.COM.
@			IN	MX	5 ALT1.ASPMX.L.GOOGLE.COM.
@			IN	MX	5 ALT2.ASPMX.L.GOOGLE.COM.
@			IN	MX	10 ALT3.ASPMX.L.GOOGLE.COM.
@			IN	MX	10 ALT4.ASPMX.L.GOOGLE.COM.
@			IN	TXT	"v=spf1 include:_spf.google.com ~all"
@			IN	SPF	"v=spf1 include:_spf.google.com ~all"
mail			IN	CNAME	ghs.googlehosted.com.
_dmarc			IN	TXT	"v=DMARC1; p=none; sp=none; rf=afrf; pct=100; ri=86400"
googlea994b6d001486007	IN	CNAME	google.com.
google._domainkey	IN	TXT	"v=DKIM1; k=rsa; p=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArUPk9h1MpfIlTVsIV6DbB" "bw2TkIbR1OCxFY4lBqLB1fv1i0+086g9CNAwVK+mqeNC6OdCoem0tHNVg3PmMuYhnwAwCAYhO0l4qf5Ew44LPZYBAXYwAEN4TQ0P/Y0Z" "zAU6Cz3VP/Y1S52VIwVKEhfFsJh3++8TBL7zePmoUtdZZgpkWbaWE1W7OzlyxhgWF0EoaQ32VPL8K6QmWye6nSmJJ1KqRWGp6jsl4v" "pP0F02mYYKgCHK12SpvgQ03CFwOfxlGoEGdhQE6YSIrvvZCag474WIkI2R4BenGYctDHoY8XhL1TxUnPYIjE8J+QcpszOlXyHwBJMD2T/aVMQmGIN5QIDAQAB"

; WPEngine Hosted Web Site
@			IN	A	35.230.26.92
www			IN	CNAME	sfmix.wpengine.com.

; Mailman3 hosted listserv
lists			IN	A	162.55.168.13
lists			IN	MX	1 lists.sfmix.org.
lists			IN	TXT	"v=spf1 a mx include:mail.mailman3.com ?all"
mail._domainkey.lists	IN	TXT	"v=DKIM1; h=sha256; k=rsa; s=email; p=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAvd8e91qus7okF77rhJRwaXMajP6cSS5bKbSNYg5wsY5ROhzN3ibhui0iHLqVyuyu1AYxdNTx2Jllk2TbY6n0KsO8/qysaeR4YnMOODGtPGp3jxQ5yzyQDVk3wmQArAS2Ph0HJ" "Al6Zd3Vo6cc0CZrwVX6oeqQu0pdUcHq8mdjW43N5i0hW/5caw/gdhM3Z9W7kvtLwAo4wNHO/kUjF2J09290zk0wrFFEhP8yB9XGn7WqpOfn7Li/gyarVynDQ5AsR30O9z+/oz3f4/6e9dXgkQkKwq0dkLpqIt5klVh6jnXzcWo13FqdLHHOcTSgkLZAQd35IPEjeP43fDxUbutVgQIDAQAB"
api.lists		IN	A	162.55.168.13
logs.lists		IN	A	162.55.168.13

; These use a separate dynamic zone file to support the LetsEncrypt DNS-01
;   challenge; this enables creating a wildcard *.<subdomain>.sfmix.org certificate
teleport	IN	NS	ns1.sfmix.org.

; SFMIX Public Services
;; ARIN: NetName: SFMIX-V4-MANAGEMENT: 192.33.255.0/24
;; ARIN: NetName: SFMIX-V6-MANAGEMENT: 2620:11A:B000::/44
;; PUBLIC-SFO02/VLAN 101: 192.33.255.0/28 / 2620:11A:B000::/64
gw.sfo02			IN	CNAME	vlan101.gw.sfo02
vlan101.gw.sfo02		IN	A	192.33.255.1
vlan101.gw.sfo02		IN	AAAA	2620:11A:B000::1
ns1				IN	A	192.33.255.3
ns1				IN	AAAA	2620:11A:B000::3
monitor.sfo02			IN	A	192.33.255.4
monitor.sfo02			IN	AAAA	2620:11A:B000::4
monitor.sfo02			IN	SSHFP 1 1 b545f8a2bba5886877fd6e4d72022187cadb161d
monitor.sfo02			IN	SSHFP 1 2 6c14db1d18ca35d96051d14c1918f678a35a33bdcd614977acdf722c40b29dbc
monitor.sfo02			IN	SSHFP 2 1 99466d885d3bc1483613345636a1913fbed21e3b
monitor.sfo02			IN	SSHFP 2 2 d9e4d0c46327aabf2b0c06e395df9b9b95e5ab08fdede1bf9413bb87036dcb24
monitor.sfo02			IN	SSHFP 3 1 52ec7a6cf659beed3e8ca777cd3c7962edad057d
monitor.sfo02			IN	SSHFP 3 2 cb0e5f76ac55206832976a34ac2b9b5a7d8f13aaf9b913898a4d2fdf04bf5b85
netbox.sfo02			IN	A	192.33.255.6
netbox.sfo02			IN	AAAA	2620:11A:B000::6
lg				IN	A	192.33.255.7
lg				IN	AAAA	2620:11A:B000::7
rs-openbsd			IN	A	192.33.255.8
rs-openbsd			IN	AAAA	2620:11A:B000::8
sentry				IN	A	192.33.255.9
sentry				IN	AAAA	2620:11A:B000::9
metrics.sfo02			IN	A	192.33.255.10
metrics.sfo02			IN	AAAA	2620:11A:B000::10
portal				IN	A	192.33.255.12
portal				IN	AAAA	2620:11A:B000::12
bcast-vlan101.gw.sfo02		IN	A	192.33.255.15
;; PUBLIC-FMT01/VLAN 100: 192.33.255.16/29 / 2620:11A:B000:100::/64
vlan100.gw.sfo02	IN	A	192.33.255.17
vlan100.gw.sfo02	IN	AAAA	2620:11A:B000:100::1
alice			IN	A	192.33.255.18
alice			IN	AAAA	2620:11A:B000:100::2
rpki			IN	A	192.33.255.19
rpki			IN	AAAA	2620:11A:B000:100::3
bcast-vlan100.gw.sfo02	IN	A	192.33.255.23
;
;; Hosted organizations
;;; RIPE Atlas Probe/VLAN 102 -- 192.33.255.24/30
vlan102.gw.sfo02	IN	A	192.33.255.25
vlan102.gw.sfo02	IN	AAAA	2620:11A:B000:102::1
ripeprobe.gw.sfo02	IN	A	192.33.255.26
ripeprobe.gw.sfo02	IN	AAAA	2620:11A:B000:102::2
bcast-vlan102.gw.sfo02	IN	A	192.33.255.27
;;; Route Views/VLAN 104 -- 192.33.255.28/30
vlan104.gw.sfo02	IN	A	192.33.255.29
vlan104.gw.sfo02	IN	AAAA	2620:11A:B000:104::1
bcast-vlan104.gw.sfo02	IN	A	192.33.255.31
;;; Verisign/VLAN 103 -- 192.33.255.32/29
vlan103.gw.sfo02	IN	A	192.33.255.33
vlan103.gw.sfo02	IN	AAAA	2620:11A:B000:103::1
bcast-vlan103.gw.sfo02	IN	A	192.33.255.39
;
;; SFMIX Public -- Site-spanning Access LAN
; 192.33.255.64/27 / 2620:11A:B000:110::/64
br110.edge-gw		IN	A	192.33.255.65
br110.edge-gw		IN	AAAA	2620:11A:B000:110::1
br110.edge-gw.sfo02	IN	A	192.33.255.66
br110.edge-gw.sfo02	IN	AAAA	2620:11A:B000:110::2
br110.edge-gw.fmt01	IN	A	192.33.255.67
br110.edge-gw.fmt01	IN	AAAA	2620:11A:B000:110::3
;br110.edge-gw.site	IN	A	192.33.255.68
;br110.edge-gw.site	IN	AAAA	2620:11A:B000:110::4
;br110.edge-gw.site	IN	A	192.33.255.69
;br110.edge-gw.site	IN	AAAA	2620:11A:B000:110::5
;host			IN	A	192.33.255.70
;host			IN	A	192.33.255.71
;host			IN	A	192.33.255.72
;host			IN	A	192.33.255.73
;host			IN	A	192.33.255.74
;host			IN	A	192.33.255.75
;host			IN	A	192.33.255.76
;host			IN	A	192.33.255.77
;host			IN	A	192.33.255.78
;host			IN	A	192.33.255.79
;host			IN	A	192.33.255.80
;host			IN	A	192.33.255.81
;host			IN	A	192.33.255.82
;host			IN	A	192.33.255.83
;host			IN	A	192.33.255.84
;host			IN	A	192.33.255.85
;host			IN	A	192.33.255.86
;host			IN	A	192.33.255.87
;host			IN	A	192.33.255.88
;host			IN	A	192.33.255.89
;host			IN	A	192.33.255.90
;host			IN	A	192.33.255.91
;host			IN	A	192.33.255.92
;host			IN	A	192.33.255.93
;host			IN	A	192.33.255.94
bcast-br110.edge-gw	IN	A	192.33.255.95
;
; edge-gw.sfo02<>edge-gw.fmt01/VLAN 201
; Exchange Fabric Edge Router Peering
; 192.33.255.240/29 / 2620:11A:B000:201::/64
eth4-201.edge-gw.sfo02	IN	A	192.33.255.241
eth4-201.edge-gw.sfo02	IN	AAAA	2620:11A:B000:201::241
eth4-201.edge-gw.fmt01	IN	A	192.33.255.242
eth4-201.edge-gw.fmt01	IN	AAAA	2620:11A:B000:201::242
;;if-name.edge-gw.site	IN	A	192.33.255.243
;;if-name.edge-gw.site	IN	A	192.33.255.244
;;if-name.edge-gw.site	IN	A	192.33.255.245
;;if-name.edge-gw.site	IN	A	192.33.255.246
;;if-name.edge-gw.site	IN	A	193.33.255.247
; edge-gw.sfo02<>edge-gw.fmt01 Backup Tunnel
; 192.33.255.248/31 / 2620:11A:B000:FE::/127
wg0.edge-gw.sfo02	IN	A	192.33.255.248
wg0.edge-gw.sfo02	IN	AAAA	2620:11A:B000:FE::0
wg0.edge-gw.fmt01	IN	A	192.33.255.249
wg0.edge-gw.fmt01	IN	AAAA	2620:11A:B000:FE::1
;; Edge Router Loopbacks -- 192.33.255.252/30 / 2620:11A:B000:FF::/64
lo.edge-gw.sfo02	IN	A	192.33.255.252
lo.edge-gw.sfo02	IN	AAAA	2620:11A:B000:FF::1
lo.edge-gw.fmt01	IN	A	192.33.255.253
lo.edge-gw.fmt01	IN	AAAA	2620:11A:B000:FF::2
;lo.edge-gw		IN	A	192.33.255.254
;lo.edge-gw		IN	A	192.33.255.255

librenms	IN	CNAME	monitor.sfo02
netbox		IN	CNAME	netbox.sfo02
metrics		IN	CNAME	metrics.sfo02
grafana		IN	CNAME	metrics.sfo02

; SFO01 (365 Main)
wan.mgmt-gw.sfo01		IN	A	192.235.122.10
mgmt-gw.sfo01			IN	A	100.64.2.1
switch01.oob.sfo01		IN	CNAME	switch01.sfo01
switch01.sfo01			IN	A	100.64.2.15
pdu01.oob.sfo01			IN	A	100.64.2.3
;pdu02.oob.sfo01		IN	A	100.64.2.4
ipmi.proxmox.oob.sfo01		IN	A	100.64.2.5
proxmox.oob.sfo01		IN	A	100.64.2.6
; Confusingly, "rs.sfo01" is now located in sfo02. needs a rename
rs.sfo01			IN	A	206.197.187.254

; SFO02 (200 Paul Ave)
wan.mgmt-gw.sfo02		IN	A	198.35.53.243
mgmt-gw.sfo02			IN	A	100.64.0.1
oob-vpn-headend			IN	A	198.35.53.243
switch01.sfo02			IN	A	100.64.0.15
switch01.oob.sfo02		IN	CNAME	switch01.sfo02
switch02.sfo02			IN	A	100.64.0.16
switch02.oob.sfo02		IN	CNAME	switch02.sfo02
pdu01.sfo02			IN	A	100.64.0.3
pdu02.sfo02			IN	A	100.64.0.4
ipmi.proxmox.oob.sfo02		IN	A	100.64.0.5
gw-sfo02			IN	A	100.64.0.6
mgmt.rs-openbsd			IN	A	100.64.0.7
vlan20.gw.oob.sfo02		IN	A	100.64.0.8
monitor.oob.sfo02		IN	A	100.64.0.9
mgmt-switch.sfo02		IN	A	100.64.0.11
wan-switch.sfo02		IN	A	100.64.0.12
netbox.oob.sfo02		IN	A	100.64.0.13
metrics.oob.sfo02		IN	A	100.64.0.14
;AVAILABLE			IN	A	100.64.0.30
portal2.sfo02			IN	A	100.64.0.17
mgmt.rs-linux			IN	A	100.64.0.18
pve01-paulave200-sfo		IN	A	100.64.0.21
pve02-paulave200-sfo		IN	A	100.64.0.23

gw-telx.sfo02		IN	A	198.35.53.241
re0.gw.sfo02	 	IN	A	198.35.53.242
eth0.gw-oob-sfo02	IN	A	198.35.53.243
eth1.gw.sfo02		IN	A	198.35.53.244
openwrt.sfo02		IN	A	198.35.53.246

re1-30.gw.sfo02		IN	A	149.20.37.65
			IN	AAAA	2001:4f8:4:6a::2
; old name
rs.sfo02	IN	CNAME	rs-linux
;
rs-linux	IN	A	206.197.187.253

; FMT01 (Hurricane Electric)
wan.mgmt-gw.fmt01	IN	A		64.71.188.18
gw.oob.fmt01		IN	A		100.64.1.1
mgmt-gw.fmt01		IN	A		100.64.1.1
mgmt-switch.fmt01	IN	A		100.64.1.3
switch01.fmt01		IN	A		100.64.1.15
switch01.oob.fmt01	IN	CNAME		switch01.fmt01
switch02.fmt01		IN	A		100.64.1.16
switch02.oob.fmt01	IN	CNAME		switch02.fmt01
switch03.fmt01		IN	A		100.64.1.17
pdu01.fmt01		IN	A		100.64.1.4
pdu02.fmt01		IN	A		100.64.1.5
backup1			IN	A		100.64.1.6
mgmt.alice		IN	A		100.64.1.7
shell			IN	A		100.64.1.8

; SCL01 (QTS SJC1)
wan.mgmt-gw.scl01	IN	A		205.234.25.36
gw.oob.scl01		IN	A		100.64.4.1
mgmt-gw.scl01		IN	A		100.64.4.1
mgmt-switch.scl01	IN	A		100.64.4.2
switch01.oob.scl01	IN	CNAME		switch01.scl01
switch01.scl01		IN	A		100.64.4.15
pdu01.scl01		IN	A		100.64.4.4
pdu02.scl01		IN	A		100.64.4.5

; SCL02 (CoreSite SV4)
wan.mgmt-gw.scl02	IN	A		66.128.149.4
gw.oob.scl02		IN	A		100.64.6.1
mgmt-gw.scl02		IN	A		100.64.6.1
mgmt-switch.scl02	IN	A		100.64.6.2
switch01.oob.scl02	IN	CNAME		switch01.scl02
switch01.scl02		IN	A		100.64.6.15
pdu01.scl02		IN	A		100.64.6.40
pdu02.scl02		IN	A		100.64.6.39

; SCL04 (OpenColo)
wan.mgmt-gw.scl04	IN	A	166.88.18.186
mgmt-gw.scl04		IN	A	100.64.7.1
mgmt-switch.scl04	IN	A	100.64.7.2
switch01.scl04		IN	A	100.64.7.15
pdu01.scl04		IN	A	100.64.7.4
pdu02.scl04		IN	A	100.64.7.5

; SJC01 (Equinix SV1)
wan.mgmt-gw.sjc01	IN	A		173.243.64.202
mgmt-gw.sjc01		IN	A		100.64.5.1
mgmt-switch.sjc01	IN	A		100.64.5.3
switch01.sjc01		IN	A		100.64.5.15
switch01.oob.sjc01	IN	CNAME		switch01.sjc01
switch02.sjc01		IN	A		100.64.5.16
switch02.oob.sjc01	IN	CNAME		switch02.sjc01

; Member IPv4 interfaces
lg.sfo01	IN	A	206.197.187.1	; SFMIX looking glass
lg.sfo01	IN	AAAA	2001:504:30::ba01:2276:1	; SFMIX looking glass
{% for ip_id, ip_address in netbox_participant_ip_addresses.items() %}
{%   set as_plus_number = 'as' + netbox_participants[ip_address.tenant.id].custom_fields.as_number | string %}
{%   if ip_address.family.value == 4 %}
{%     set type = "A" %}
{%   elif ip_address.family.value == 6 %}
{%     set type = "AAAA" %}
{%   endif %}
{{ as_plus_number }}		IN	{{ type }}	{{ ip_address.address | ansible.utils.ipaddr('address') }}
{% endfor %}
